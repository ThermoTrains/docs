<div class="chapter">
  <h2 class="break"><a name="evaluierte-kamera">Kamera Evaluation</a></h2>

  <h3>Anforderungen</h3>

  <figure>
    <table>
      <thead>
      <tr>
        <th>Nr.</th>
        <th>Name</th>
        <th>Beschreibung</th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td>1</td>
        <td>Field Of View (FOV)</td>
        <td>
          Die Kamera muss ein genügend grosses FOV besitzen. Der Zug soll in der Höhe komplett auf das Bild
          passen. Der IC2000 ist ca. 4m hoch. Wir gehen davon aus, dass wir die Kamera mind. 5 Meter entfernt vom Zug
          aufstellen können.
        </td>
      </tr>
      <tr>
        <td>2</td>
        <td>Auflösung</td>
        <td>
          Je höher die Auflösung desto besser lassen sich die Aufnahmen bearbeiten und analysieren. Die Auflösung von
          Infrarotkamera sind technologiebedingt klein, deshalb sollte eine grösstmögliche Auflösung gewählt werden.
        </td>
      </tr>
      <tr>
        <td>3</td>
        <td>Automatisierbar</td>
        <td>
          Die Kamera muss automatisierbar sein, d.h. sie muss per API gesteuert und ausgelesen werden können.
          Ein Netzwerkanschluss ist wünschenswert, so kann die Kamera einfach remote gesteuert werden.
        </td>
      </tr>
      <tr>
        <td>4</td>
        <td>Framerate</td>
        <td>
          Die Framerate muss genügend gross sein, um ausreichend Bilder des vorbeifahrenden Zuges aufzunehmen.
          Zwei aufeinander folgende Frames sollten sich dabei zu min. 25% überlappen, um ein Stitching zu ermöglichen.
          Bis zu einer Geschwindigkeit von 30km/h soll dies möglich sein. Die Limitierung auf 30km/h rührt von der
          Trägheit des Detektionsmaterials her (bei Microbolometer).
        </td>
      </tr>
      <tr>
        <td>5</td>
        <td>Preis</td>
        <td>
          Die SBB übernimmt die Kosten für die Anschaffung und Wartung der Kamera. Deshalb müssen die Kosten im
          Rahmen des Budget der SBB liegen.
        </td>
      </tr>
      </tbody>
    </table>
    <figcaption>Kameraanforderungen</figcaption>
  </figure>

  <p>
    Ein wichtiger Punkt ist das Field Of View oder zu Deutsch das Sichtfeld. Es muss sichergestellt sein,
    dass der gesamte Zug der Höhe nach auf das Bild passt. Der FOV-Winkel schränkt daher die Aufnahmedistanz ein.
    Auf der unten abgebildeten Grafik sieht man die Pyramide, die das Sichtfeld der Kamera aufspannt. Der Öffnungswinkel
    entspricht dem FOV-Winkel. In der Tabelle unten sind die Dimensionen des Sichtfeldes bei Aufnahmen aus verschiedenen
    Distanzen aufgelistet. Um den Zug von unten nach oben zu erfassen, muss man mit der Kamera von FLIR also min. 5m
    entfernt sein.
  </p>

  <figure class="full">
    <img src="images/FOV_Ax5.png">
    <figcaption>FOV FLIR Ax5</figcaption>
    <span class="source">Quelle: <a href="#ref-fov-calculator">FLIR FOV Calculator</a></span>
  </figure>

  <ol>
    <li>Vertical field of view</li>
    <li>Instantaneous field of view</li>
    <li>Horizontal field of view</li>
    <li>Depth of field far limit</li>
    <li>Depth of field near limit</li>
    <li>Distance to target</li>
  </ol>

  <figure>
    <table class="right">
      <thead>
      <tr style="font-weight:bold;">
        <th style="text-align:left;">Distance</th>
        <th>2.00m</th>
        <th>4.00m</th>
        <th>5.00m</th>
        <th>6.00m</th>
        <th>8.00m</th>
        <th>10.00m</th>
      </tr>
      </thead>

      <tbody>
      <tr>
        <td style="text-align:left;">HFOV</td>
        <td>1.67m</td>
        <td>3.35m</td>
        <td>4.18m</td>
        <td>5.02m</td>
        <td>6.70m</td>
        <td>8.37m</td>
      </tr>

      <tr>
        <td style="text-align:left;">VFOV</td>
        <td>1.34m</td>
        <td>2.68m</td>
        <td>3.35m</td>
        <td>4.02m</td>
        <td>5.36m</td>
        <td>6.70m</td>
      </tr>

      <tr>
        <td style="text-align:left;">DOF near</td>
        <td>1.36m</td>
        <td>2.07m</td>
        <td>2.32m</td>
        <td>2.51m</td>
        <td>2.80m</td>
        <td>3.02m</td>
      </tr>

      <tr>
        <td style="text-align:left;">DOF far</td>
        <td>3.72m</td>
        <td>51.4m</td>
        <td>Infinity</td>
        <td>Infinity</td>
        <td>Infinity</td>
        <td>Infinity</td>
      </tr>

      <tr>
        <td style="text-align:left;">IFOV</td>
        <td>2.62mm</td>
        <td>5.23mm</td>
        <td>6.54mm</td>
        <td>7.85mm</td>
        <td>10.46mm</td>
        <td>13.08mm</td>
      </tr>
      </tbody>
    </table>
    <figcaption><a href="#ref-fov-calculator">FLIR FOV Calculator</a></figcaption>
  </figure>

  <h3>Sensortypen</h3>

  <p>
    Es gibt zwei Infrarot-Sensortypen:
  </p>

  <ul class="affix">
    <li>
      <strong>Microbolometer:</strong><br>
      Wird auch ungekühlte IR-Kamera genannt. Sie bilden das untere Preissegment (100 - 50k CHF).
      Sie funktionieren in dem das Detektionsmaterial durch Infrarotstrahlung erwärmt wird,
      was elektrischen Widerstand erzeugt. Das Detektionsmaterial ist ein spezielles Metall, das die
      elektromagnetische Strahlung absorbiert und sich somit erwärmt. Zusätzlich hat das Metall die Eigenschaft
      seinen elektrischen Widerstand abhängig von der Temperatur zu ändern. So sind Temperaturunterschiede
      detektierbar.
      Die Änderungen des Widerstandes werden dann in einem gewissen Takt ausgelesen, was einen Verschluss simuliert.
      Ein Sensor besteht aus vielen Tausend Microbolometer, die verschiedene Temperaturbereiche messen. Ein
      Microbolometer
      repräsentiert also nicht ein Pixel, sondern nur ein Teil davon.
    </li>
    <li>
      <strong>Indium Antimonide:</strong><br>
      Sogenannte gekühlte Kameras. Sie bilden das obere Preissegment (70k+ CHF). Tatsächlich werden sie auf bis zu 4&deg;
      Kelvin heruntergekühlt. Dies ist notwendig, damit das Bild nicht durch die Wärme der Kamera selbst verfälscht
      wird. Bei diesem Sensortyp handelt es sich nämlich um einen Photonendetektor. Er ist dadurch extrem schnell und
      ermöglicht daher höhere "Verschlusszeiten" resp. einen höheren Auslesetakt. Werte von 10'000 Frames pro Sekunde
      können erreicht werden. Ausserdem verfügen Kameras dieser Kategorie auch über höhere Auflösungen. Dies ist auch
      die Technologie die vom Militär eingesetzt wird. Da die Kühlung des Systems kompliziert ist und mit Hilfe von
      Heliumgas funktioniert, welches mit der Zeit entweicht, muss die Kamera jährlich gewartet werden. Das führt zu
      weiteren Kosten nebst dem Anschaffungspreis.
    </li>
  </ul>

  <p>
    Die meisten Vorteile bieten auf jeden Fall die gekühlten Kameras. Sie haben einen höheren Auslesetakt, eine
    bessere Auflösung und messen die Temperatur auf bis zu 20mK genau (im Gegensatz zu 50mK). Die ungekühlten Kameras
    dagegen sind viel preiswerter und weniger aufwendig in der Bedienung und Wartung. Für den Preis einer gekühlten
    Kamera, könnte man gleich mehrere ungekühlte Kameras anschaffen. Was natürlich von Vorteil ist, wenn man die
    gesamte Flotte der SBB thermographisch analysieren will.
  </p>

  <h3>Kameratypen</h3>

  <p>
    Neben den verschiedenen Sensoren unterscheiden man auch noch thermale und thermographische Kameras:
  </p>

  <ul class="affix">
    <li>
      <strong>Thermal:</strong><br>
      Zeigt Temperaturunterschiede nur relativ an. Kann also keine absoluten Temperaturwerte messen.
    </li>
    <li>
      <strong>Thermographisch:</strong><br>
      Kann absolute Temperaturwerte messen und anzeigen.
    </li>
  </ul>

  <p>Oben ein Bild einer Thermalkamera und unten das einer thermographischen.</p>

  <figure>
    <img src="images/thermal.png">
    <figcaption>Thermalkamera</figcaption>
    <span class="source">Quelle: <a href="#ref-flir-thermal">FLIR Thermal Imaging example</a></span>
  </figure>
  <figure>
    <img src="images/thermography.jpg">
    <figcaption>Thermografische Kamera</figcaption>
  </figure>

  <p>
    Wir haben uns für die Evaluation von thermographischen Kameras entschieden. Da die Kamera später evtl. für andere
    Zwecke verwendet wird, ist das messen von absoluten Temperaturen sicher praktisch. Auch für unser Projekt könnten
    das nützliche Informationen sein, beispielsweise für die Klassifizierung.
  </p>

  <h3>Evaluierte Kamera</h3>

  <p>
    Schlussendlich haben wir zwei passende Kameras gefunden. Da der Markt nicht sehr gross ist und wir unsere
    Anforderungen ziemlich genau kannten, war die engere Auswahl schnell getroffen. Auch die beiden Experten von ID
    Systems, die uns bei der Evaluation unterstützt haben, schlugen ähnliche Modelle vor. Aufgrund des Budgets kamen
    keine gekühlten Kameras in Frage.
  </p>

  <figure>
    <table>
      <thead>
      <tr>
        <th></th>
        <th>FLIR A65</th>
        <th>Optris PI 640</th>
      </tr>
      </thead>

      <tbody>
      <tr>
        <th>Auflösung</th>
        <td>640 x 512px</td>
        <td>640 x 480px</td>
      </tr>
      <tr>
        <th>Field Of View</th>
        <td>45&deg;</td>
        <td>45&deg;</td>
      </tr>
      <tr>
        <th>Framerate</th>
        <td>30 Hz</td>
        <td>32 Hz</td>
      </tr>
      <tr>
        <th>Preis</th>
        <td>8'359.85 CHF</td>
        <td>7'462.80 USD</td>
      </tr>
      </tbody>
    </table>
    <figcaption>FLIR A65 vs. Optris PI 640</figcaption>
  </figure>

  <p>
    Wie aus der Tabelle ersichtlich unterscheiden sich die beiden Modelle in den wichtigsten Punkten nicht gross.
    Den Ausschlag für die FLIR Kamera hat schlussendlich die kostenlose Unterstützung bei der Inbetriebnahme gegeben.
    Somit haben wir mit der FLIR A65 eine IR-Kamera gefunden die all unseren Anforderungen entspricht. Die
    Einschränkungen die wir beachten müssen sind:
  </p>

  <ul>
    <li>Züge dürfen höchstens 30km/h fahren, ansonsten verschmieren die Bilder.</li>
    <li>Ein minimaler Abstand von 5m muss für die Aufnahmen gewährleistet sein.</li>
  </ul>

  <figure>
    <img src="images/thermoscanner/camera.png" width="700"/>
    <figcaption>FLIR A65</figcaption>
    <span class="source">Quelle: <a href="#ref-flir-a65">FLIR A65 User Manual</a></span>
  </figure>

  <p>
    Von der Evaluation weiterer Komponenten für eine "IR-Analyse-Box" wie ursprünglich angedacht, haben wir abgesehen.
    Wir beschränken uns vorerst auf die Kamera und die Entwicklung der Image Processing Pipeline. Es gibt noch
    wichtigere offene Punkte wie bsp. die Klassifizierung die Priorität haben. Eine eigenständige Box zu
    entwerfen, welche Kamera und Analysesoftware enthält, ist zu einem späteren Zeitpunkt immer noch möglich.
  </p>

</div>

<!-- References -->

<p id="ref-fov-calculator" class="reference-item">
  <span class="ref">FLIR FOV Calculator</span>
  <a href="http://flir.custhelp.com/app/utils/fl_fovCalc/pn/64502-1101" target="_blank">http://flir.custhelp.com/app/utils/fl_fovCalc/pn/64502-1101</a>
  <span class="retrieved">10. Juni 2017</span>
</p>

<p id="ref-flir-a65" class="reference-item">
  <span class="ref">FLIR A65 User Manual</span>
  <a href="http://support.flir.com/DocDownload/Assets/dl/t559770-en-us_a4.pdf" target="_blank">http://support.flir.com/DocDownload/Assets/dl/t559770-en-us_a4.pdf</a>
  <span class="retrieved">16. Juni 2017</span>
</p>

<p id="ref-flir-thermal" class="reference-item">
  <span class="ref">De Muynck, S.: FLIR Thermal Imaging example</span>
</p>
