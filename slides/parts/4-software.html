<section>
  <section>
    <h2>Thermobox Software</h2>
  </section>

  <section>
    <h3>Architecture</h3>
    <ul>
      <li>Pub / Sub</li>
      <li>Components:
        <ul>
          <li>IR Reader</li>
          <li>IR Compressor</li>
          <li>Temperature Reader</li>
          <li>Visible Light Reader</li>
          <li>Uploader</li>
        </ul>
      </li>
    </ul>
  </section>

  <section data-background-image="images/software/component-diagram.png" data-background-size="auto 90%">
  </section>

  <section>
    <h3>Technologies</h3>
    <ul>
      <li>C# / .NET</li>
      <li>OpenCV / EmguCV</li>
      <li>FLIR Atlas SDK</li>
      <li>Basler Pylon SDK</li>
    </ul>
  </section>

  <section>
    <h3>Artifacts</h3>
    <ul>
      <li>IR Snapshot Image</li>
      <li>IR Video</li>
      <li>FLIR Camera Parameters</li>
      <li>RGB Video</li>
      <li>Outside atmospheric temperature</li>
    </ul>
  </section>

  <section>
    <h3>Archiving</h3>
    <ul>
      <li>Hochgeladene Datei wird lokal in den Papierkorb verschoben</li>
      <li>Windows limitiert die Grösse des Papierkorbs und leer ihn</li>
    </ul>
  </section>

  <section>
    <h3>Infrared Video Compression</h3>
    <pre><code>ushort[] original = ...
ushort min = min(original)
ushort max = max(original)
double factor = 256 / (max - min)
byte compressed = (original - min) * factor
ushort[] uncompressed = (compressed / factor) + min</code></pre>
  </section>

  <section>
    <h3>SeqConverter CLI</h3>
    <ul>
      <li>15s SEQ Video: 750 MiB</li>
      <li>15s MP4 Video: 15 MiB</li>
      <li>Convert FLIR SEQ to MP4</li>
      <li>Transmit</li>
      <li>Convert MP4 back to FLIR SEQ</li>
      <li>Analyze in FLIR Tools</li>
    </ul>
  </section>

  <section>
    <h3>FLIR SEQ Format</h3>
    <ul>
      <li>Proprietary format</li>
      <li>Contains row of FFF files</li>
      <li>FFF: Extended TIFF</li>
      <li>Stores information in EXIF</li>
    </ul>
  </section>

  <section>
    <h4>FLIR SEQ Exif Data</h4>
    <pre><code data-noescape>ExifTool Version Number         : 10.65
File Name                       : Recordings0001.seq
Directory                       : .
File Size                       : 723 MB
File Modification Date/Time     : 2017:09:29 10:10:07+02:00
File Access Date/Time           : 2017:09:29 10:10:07+02:00
File Creation Date/Time         : 2017:09:29 15:02:17+02:00
File Permissions                : rw-rw-rw-
File Type                       : SEQ
File Type Extension             : seq
MIME Type                       : application/unknown
Creator Software                : ATAU_RBFO
Raw Thermal Image Width         : 640
Raw Thermal Image Height        : 512
Raw Thermal Image Type          : TIFF
Raw Thermal Image               : (Binary data 655564 bytes, use -b option to extract)
Emissivity                      : 1.00
Object Distance                 : 0.00 m
Reflected Apparent Temperature  : 21.9 C
Atmospheric Temperature         : 21.9 C
IR Window Temperature           : 21.9 C
IR Window Transmission          : 1.00
Relative Humidity               : 0.0 %
Planck R1                       : 16556
Planck B                        : 1428
Planck F                        : 1
Atmospheric Trans Alpha 1       : 0.006569
Atmospheric Trans Alpha 2       : 0.012620
Atmospheric Trans Beta 1        : -0.002276
Atmospheric Trans Beta 2        : -0.006670
Atmospheric Trans X             : 1.900000
Camera Temperature Range Max    : 4726.9 C
Camera Temperature Range Min    : -273.1 C
Camera Temperature Max Clip     : 99726.9 C
Camera Temperature Min Clip     : -273.1 C
Camera Temperature Max Warn     : 99726.9 C
Camera Temperature Min Warn     : -273.1 C
Camera Temperature Max Saturated: 99726.9 C
Camera Temperature Min Saturated: -273.1 C
Camera Model                    : FLIR AX5
Camera Part Number              :
Camera Serial Number            : 215188
Camera Software                 :
Lens Model                      : N/A
Lens Part Number                :
Lens Serial Number              :
Field Of View                   : 0.0 deg
Filter Model                    : N/A
Filter Part Number              :
Filter Serial Number            :
Planck O                        : -207
Planck R2                       : 0.046952017
Raw Value Median                : 2339
Raw Value Range                 : 1622
Date/Time Original              : 2017:09:29 10:09:03.033+01:00
Focus Step Count                : 0
Focus Distance                  : 0.0 m
<mark>Frame Rate                      : 30</mark>
Palette Colors                  : 224
Above Color                     : 169 128 128
Below Color                     : 49 128 128
Overflow Color                  : 67 215 98
Underflow Color                 : 40 109 239
Isotherm 1 Color                : 99 128 128
Isotherm 2 Color                : 92 115 209
Palette Method                  : 0
Palette Stretch                 : 1
Palette Name                    : Iron
Palette                         : (Binary data 672 bytes, use -b option to extract)
Peak Spectral Sensitivity       : 10.1 um</code></pre>
  </section>

  <section>
    <h4>ExifTool Version History</h4>
    <pre><code data-noescape>Oct. 17, 2017 - Version 10.64
  Added a new Nikon LensID
  Added a new SonyModelID
  Added a new CanonModelID (thanks LibRaw)
  Added some new non-standard CustomRendered values
  <mark>Decode FrameRate from FLIR SEQ files (thanks Sebastian Häni)</mark>
  Enhanced shift feature to be able to shift some ...
  Fixed problem with possible malformed UTF-8 when writing IPTC
  Fixed incorrect Writable type for XMP-GSpherical:TimeStamp
  Fixed incorrect family 2 group name for Nikon HDRInfo tags</code></pre>
  </section>

  <section>
    <h3>Start / Stop Detection algorithm</h3>
    <ul style="font-size: .7em;">
      <li>Get background image (no movements)</li>
      <li>Grab 4 images</li>
      <li>Detect changed area
        <ul>
          <li>Absolute Difference</li>
          <li>Binary Thershold</li>
          <li>Erode</li>
          <li>Dilate</li>
          <li>Find contours</li>
          <li>Create bounding box</li>
        </ul>
      </li>
      <li>If changed area is getting wider
        <ul>
          <li>=> entry</li>
          <li>else => exit</li>
        </ul>
      </li>
    </ul>
  </section>

  <section>
    <h3>Monitoring Tools</h3>
    <ul>
      <li><a href="https://monitoring.sebastianhaeni.ch" target="_blank" rel="noopener">Hardware Monitoring</a></li>
      <li><a href="https://thermobox.sebastianhaeni.ch" target="_blank" rel="noopener">Dashboard</a></li>
      <li><a href="https://sentry.io/student-00/thermobox/" target="_blank" rel="noopener">Sentry Error Tracking</a>
      </li>
      <li>Teamviewer Remote</li>
      <li>Logs</li>
    </ul>
  </section>
</section>
